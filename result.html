<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>签文结果</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h2>您抽到的签是：</h2>
    <div id="fortuneText"></div>
    <button onclick="handleGPT()">GPT 解签</button>
    <div id="interpretation" style="white-space: pre-wrap; margin-top: 20px;"></div>
  </div>
<script>
  function loadFortune() {
    const fortuneData = sessionStorage.getItem('fortune');
    if (!fortuneData) {
      document.getElementById("fortuneText").innerText = "⚠️ 请先抽签再查看签文。";
      return;
    }

    const fortune = JSON.parse(fortuneData);
    document.getElementById("fortuneText").innerText = `${fortune.level}\n${fortune.text_zh}\n${fortune.text_en}`;
  }

function handleGPT() {
  //const today = new Date().toISOString().split("T")[0];
  //const usedDate = localStorage.getItem("used_date");

  //if (usedDate === today) {
   // alert("⚠️ 你今天已经解过签了，请明天再来哦！");
   // return;
 // }

 // localStorage.setItem("used_date", today);
  interpret(); // 继续执行 GPT 解签逻辑
}

  // 页面加载时立即执行
  window.onload = loadFortune;
</script>

  <script src="js/ai-helper.js"></script>
</body>
</html>
